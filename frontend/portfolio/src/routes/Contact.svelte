<script>
    import { SendIcon } from 'svelte-feather-icons'

    // import Animate from "./Animate.svelte";
    import { onMount } from "svelte";





    

//     let message;
//     let email;
//     let contacts = [];

//   onMount(async () => {
//     fetch("https://vic.uy/contact/")
//       .then((response) => response.json())
//       .then((data) => {
//         contacts = data;
//         console.log(contacts);
//         // console.log(data);
//       })
//       .catch((error) => {
//         // console.log(error);
//         return [];
//       });
//   });

  
//   function getCookie(name) {
//   let cookieValue = null;
//   if (document.cookie && document.cookie !== "") {
//     const cookies = document.cookie.split(";");
//     for (let i = 0; i < cookies.length; i++) {
//       const cookie = cookies[i].trim();
//       if (cookie.substring(0, name.length + 1) === name + "=") {
//         cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
//         break;
//       }
//     }
//   }
//   return cookieValue;

// }




//   const sendEmail=async () => {

//     const csrfCookie = getCookie("csrftoken");

//     const recaptchaResponse = grecaptcha.getResponse();

//     const response = await fetch("https://vic.uy/send_email/", {
//       method: "POST",
//       headers: {
//         "Content-Type": "application/json",
//         "X-CSRFToken": csrfCookie, 
//       },
//       body: JSON.stringify({ message, email,recaptchaResponse }),
//       credentials: 'include',
//     });

//     if (!response.ok) {
//       console.log(response)
//       const data = await response.json();
//       console.error("Error enviando correo",data);
//       document.getElementById("message").textContent = "Error al enviar e mensaje, intentelo nuevamente";

//     } else {
//       console.log(response)

//       // const data = await response.json();
//       document.getElementById("message").textContent = "Mensaje enviado con exito";

//       console.log("Correo enviado correctamente");
//     }
//   };




//   let recaptchaResponse = null;

// function onRecaptcha(response) {
//   recaptchaResponse = response;
// }


</script>

    <div class="columns is-multiline mx-2 my-6">
      <div class="column"></div>
      <div class="column is-one-third">
        <div class="container">

          <h4 class="title custom-title"></h4>
          <p class="custom-text"></p>
          <div class="custom-message" id="message"></div>

        </div>
        <form class="mt-6 form-contact" action="" >
          <div class="title">Contact</div>
        <div class="field">
          <label class="label custom-label">Email</label>
          <div class="control has-icons-left has-icons-right">
            <input class="input custom-input " type="email" placeholder="Email input">
            <span class="icon is-small is-left">
              <i class="fas fa-envelope"></i>
            </span>
            <span class="icon is-small is-right">
              <i class="fas fa-exclamation-triangle"></i>
            </span>
          </div>
        </div>
      

        <div class="field">
          <label class="label custom-label">Message</label>
          <div class="control">
            <textarea class="textarea custom-input"   placeholder="Message"></textarea>
          </div>
        </div>

        <div class="field is-grouped is-justify-content-center">
          <div class="control btn-cv  ">
            <button class="button custom-button  is-normal is-rounded ">
              <span>
              <SendIcon size="24" />
            </span>
              Send</button>
          </div>

        </div>

      </form>
      <div class="column">
      <div class="container">
      <div class="g-recaptcha " data-sitekey="6Ld7NskkAAAAAJKzdpVtsTXKBUdX_TT3dizQHxA8"></div>

      <script src="https://www.google.com/recaptcha/api.js" async defer></script>
    </div>
  </div>
      </div>

      <div class="column"></div>
      <script src="https://www.google.com/recaptcha/api.js" async defer></script>

    </div>








  <style>


  
.label__contact{
  color: #2d334a;

}



.title {
    font-family: "Karla", sans-serif;
    text-align: center;
    color: #2d334a;
  }

  .subtitle{
    text-align: center;
    color: #2d334a;
  }




  .btn-contact{
    height: auto;
    width: auto;
    margin: 36px;
  }

  


  .custom-component {
        background-color: #fffffe;
    }

  :global(body.dark-mode) .custom-component {
        background-color: #2d334a;
        color: #fffffe;
    }

.custom-title{
  color:#0f0e17;
  text-align: center;
}

:global(body.dark-mode) .custom-title {
        text-align: center;
        color: #fffffe;
    }

.custom-form {
        color: #2d334a;
}



.custom-button{
  background-color: #6246eae8;
    border: none;
    color: #fffffe;
    width: 105px;
    margin-bottom: 15px;

}



:global(body.dark-mode) .custom-button {

  background-color: #ff8906;
    border: none;
    color: #fffffe;
    width: 105px;
    margin-bottom: 15px;

}


.custom-input{
border-color:#1f1235 ;
}

:global(body.dark-mode) .custom-input {


}

.custom-label{
  color: #1f1235;
  

}

:global(body.dark-mode) .custom-label {

color: white;
}

:global(body.dark-mode) .custom-text {
        color: #f0f0f0;
        text-align: justify;
}
.custom-text{
  text-align: justify;
  color: #1f1235;
  font-family: "Inconsolata", monospace;
  line-height: 1.70rem;
}


.custom-message{
  color: green;
  text-align: center;
}


:global(body.dark-mode) .custom-message {
        color: #f0f0f0;
        text-align: center;
}


.captcha-format{
  margin-top: 36px;
  margin-left: 13px;
}


.g-recaptcha{
  margin: 0 auto;
  width: 304px;
}

button:hover:before {
  opacity: 0.2;
}

button:hover {
  transform: translateY(-3px);
  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
}

.form-contact{
  background-color: #d1d1e9;
  padding: 30px;
  border-radius: 10px;
  box-shadow: 0 30px 30px -30px rgba(27, 26, 26, 0.315);

}
  </style>